<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket demo</title>
  </head>
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous">
  </script>
  <body>
    <script>
      var ws = new WebSocket("ws://127.0.0.1:3000/"),
        messages = document.createElement('ul'),
        input = document.createElement('input');
        input.className = 'input'
      ws.onmessage = function (event) {
        var messages = document.getElementsByTagName('ul')[0],
          message = document.createElement('ul'),
          content = document.createTextNode(event.data);
        console.log(messages);
        message.appendChild(content);
        messages.appendChild(message);
      };
      document.body.appendChild(messages);
      document.body.appendChild(input);
      $('.input').keypress(function (e) {
        if (e.which == 13) {
          ws.send($('.input').val());
          $('.input').val('');
          return false;
        }
      });
    </script>
  </body>
</html>
